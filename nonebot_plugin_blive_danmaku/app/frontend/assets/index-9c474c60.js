var e=Object.defineProperty,t=(t,a,s)=>(((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(t,"symbol"!=typeof a?a+"":a,s),s);import{aN as a,aO as s,aP as n,F as r,t as o,aQ as i,p as l,P as d,aD as u,_ as c,Z as p,o as m,U as y,L as f,u as h,a0 as g,f as _,am as w,V as b,g as v,aR as x,a1 as E,aS as T,aT as k,aU as I,aK as L,aV as P}from"./vendor-0eb16a42.js";import{E as C,a as N,b as O,h as j,s as U,z as R,c as D,d as S,e as V,f as A,g as q,i as H,j as $,k as z,l as B}from"./elementPlus-ce38aef7.js";import"./lodash-520df23f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const M={},F=function(e,t,a){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"/danmaku/"+e}(e))in M)return;M[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(!!a)for(let a=s.length-1;a>=0;a--){const n=s[a];if(n.href===e&&(!t||"stylesheet"===n.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},K=a("storeId",{state:()=>({type_id:0,type:"",uid:0}),getters:{getTypeId:e=>e.type_id,getType:e=>e.type,getUid:e=>e.uid},actions:{setState(e,t){if(!e||!t)throw new Error("参数错误，需要从bot提供的地址进入");if(isNaN(Number(e)))throw new TypeError("type_id类型错误");{const a=Number(e);this.type=t,this.type_id=a}},setUid(e){if(!e)throw new Error("参数错误");if(isNaN(Number(e)))throw new TypeError("uid类型错误");{const t=Number(e);this.uid=t}}}}),W=`${location.protocol}//${location.host}/danmaku`;const G=new class{constructor(e){t(this,"baseUrl"),this.baseUrl=e}getInsideConfig(){return{baseUrl:this.baseUrl,params:{}}}async get(e,t={},a=null){const n=this.getInsideConfig();n.params=t;return(await s.get(n.baseUrl+e,n)).data}async post(e,t={},a=null){const n=this.getInsideConfig();null!=a&&Object.assign(n,a);return(await s.post(n.baseUrl+e,t,n)).data}}(W),Q=async(e={})=>await G.get("/api/get_sub_list",e),Z=async(e={})=>await G.get("/api/get_room",e),J=async(e={})=>await G.get("/api/get_room_danmaku",e),X=async(e={})=>await G.get("/api/get_liver_name",e);n.locale("zh-cn");const Y=e=>{if(0===e)return"/";return n.unix(e).format("yyyy-MM-D HH:mm:ss")},ee=e=>n(e).format("HH:mm:ss"),te=e=>{const t=window.location.hash.split("?",2)[1];if(t){const a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),s=t.match(a);return null!=s?decodeURIComponent(s[2]):null}},ae=()=>n(),se=e=>{const t=K();C.confirm("是否重置图片缓存？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(async(e={})=>await G.get("/api/clear_cache",e))({type:t.getType,type_id:t.getTypeId}))).then((t=>{0===t.code?(N({title:"提示",message:"操作成功",type:"success"}),e&&location.reload()):N({title:"提示",message:"操作失败",type:"error"})})).catch((e=>{}))},ne=v("div",{class:"flex-grow"},null,-1),re=v("span",null,"Home",-1),oe=r({__name:"App",setup(e){const t=o([]),a=o(1020),s=o(1920),n=i(),r=K(),T=()=>{const e=r.getTypeId,t=r.getType;n.replace({path:"/",query:{type:t,type_id:e}})},k=()=>{const e=r.getTypeId,t=r.getType;n.push({name:"change",query:{type:t,type_id:e}})},I=x({loader:()=>F((()=>import("./helpDialog-7714e338.js")),["assets/helpDialog-7714e338.js","assets/elementPlus-ce38aef7.js","assets/vendor-0eb16a42.js","assets/lodash-520df23f.js","assets/elementPlus-6b6c969f.css"])}),L=o(),P=()=>{L.value.open()},C=()=>{const e=window.innerWidth,t=window.innerHeight;a.value=t-60,s.value=e;document.querySelector(".danmaku-main").style.width=s.value-200+"px"},M=()=>{(async(e={})=>await G.get("/api/get_liver_list",e))({type_id:r.getTypeId,type:r.getType}).then((async e=>{0===e.code?Object.assign(t.value,e.data.data):N({title:"Error",message:e.msg||"请求异常",type:"error"})})).catch((e=>{N({title:"Error",message:"系统异常",type:"error"})}))};return l((()=>{C(),window.addEventListener("resize",C);const e=te("type"),t=te("type_id");r.setState(t,e),M()})),d((()=>{window.removeEventListener("resize",C)})),(e,o)=>{const i=D,l=S,d=V,x=A,C=q,N=H,M=$,F=u("RouterView"),K=z,W=B,G=O;return m(),c(G,null,{default:p((()=>[y(M,{offset:.1},{default:p((()=>[y(x,{"background-color":"#545c64","text-color":"#fff",ellipsis:!1,router:!1,style:f({width:s.value+"px"}),mode:"horizontal"},{default:p((()=>[y(l,{index:"0"},{default:p((()=>[y(i,null,{default:p((()=>[y(h(j))])),_:1}),g(" blive_danmaku ")])),_:1}),ne,y(d,{index:"1"},{title:p((()=>[y(i,null,{default:p((()=>[y(h(U))])),_:1})])),default:p((()=>[y(l,{index:"1-1",onClick:o[0]||(o[0]=e=>h(se)(!0))},{default:p((()=>[g(" 修复图片缓存 ")])),_:1}),y(l,{index:"1-2",onClick:k},{default:p((()=>[g(" 更新日志 ")])),_:1}),y(l,{index:"1-3",onClick:P},{default:p((()=>[g(" 帮助 ")])),_:1})])),_:1})])),_:1},8,["style"]),y(N,{width:"200px",class:"danmaku-aside",style:f({height:a.value+"px"})},{default:p((()=>[y(C,{"max-height":a.value},{default:p((()=>[y(x,null,{default:p((()=>[y(l,{index:"0",onClick:T},{default:p((()=>[re])),_:1}),(m(!0),_(b,null,w(t.value,((e,t)=>(m(),c(l,{index:t+1,onClick:t=>((e,t)=>{const a=r.getTypeId,s=r.getType;n.push({name:"history",query:{type:s,type_id:a,uid:e}})})(e.uid,e.name)},{default:p((()=>[v("span",null,E(e.name),1)])),_:2},1032,["index","onClick"])))),256))])),_:1})])),_:1},8,["max-height"])])),_:1},8,["style"]),v("div",{class:"h-6",id:"danmaku-menu-line",style:f({width:s.value+"px"})},null,4)])),_:1}),y(W,{class:"danmaku-main"},{default:p((()=>[y(K,{locale:h(R)},{default:p((()=>[y(F)])),_:1},8,["locale"])])),_:1}),y(h(I),{ref_key:"hd",ref:L},null,512)])),_:1})}}}),ie=T({history:k(),routes:[{name:"home",path:"/",component:()=>F((()=>import("./index-a1fdafed.js")),["assets/index-a1fdafed.js","assets/elementPlus-ce38aef7.js","assets/vendor-0eb16a42.js","assets/lodash-520df23f.js","assets/elementPlus-6b6c969f.css","assets/_plugin-vue_export-helper-1b428a4d.js","assets/index-cd2e8127.css"])},{name:"history",path:"/history",component:()=>F((()=>import("./index-39997b13.js")),["assets/index-39997b13.js","assets/elementPlus-ce38aef7.js","assets/vendor-0eb16a42.js","assets/lodash-520df23f.js","assets/elementPlus-6b6c969f.css","assets/_plugin-vue_export-helper-1b428a4d.js","assets/index-e4f895c9.css"])},{name:"room",path:"/room",component:()=>F((()=>import("./index-91e06d1f.js")),["assets/index-91e06d1f.js","assets/elementPlus-ce38aef7.js","assets/vendor-0eb16a42.js","assets/lodash-520df23f.js","assets/elementPlus-6b6c969f.css","assets/_plugin-vue_export-helper-1b428a4d.js","assets/index-7b5a4dd8.css"])},{name:"change",path:"/change",component:()=>F((()=>import("./index-279fe95c.js")),["assets/index-279fe95c.js","assets/elementPlus-ce38aef7.js","assets/vendor-0eb16a42.js","assets/lodash-520df23f.js","assets/elementPlus-6b6c969f.css"])}]}),le=I(),de=L(oe);de.use(ie),de.use(le),de.use(P),de.mount("#app");export{se as C,ee as F,ae as G,F as _,Z as a,W as b,Y as c,Q as d,X as e,J as f,te as g,K as u};
