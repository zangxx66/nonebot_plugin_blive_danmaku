import{g as e,i as a,j as t,v as s,k as r,l as o,m as l,n,o as i,p as u}from"./elementPlus-f16563b7.js";import{D as d,r as p,s as c,d as m,U as g,X as v,Y as f,_ as y,F as _,aD as b,o as x,ah as h,az as j,e as k,a0 as $,u as w,ae as C}from"./vendor-b101ffcd.js";import{g as E,b as z,C as D}from"./config-758143a0.js";import{u as P}from"./index-89088ace.js";import"./lodash-a70ac895.js";const T={style:{padding:"14px"}},U={class:"bottom"},q={class:"time"},F=d({__name:"index",setup(d){const F=p([]),I=p(0),O=p(1),S=p(!0),X=P();document.title="主页-blive_danmaku";const Y=()=>{},A=()=>{S.value=!0;const a=X.getType,t=X.getTypeId;if(!a||!t)return e({title:"Error",message:"当前地址有误，请从bot重新获取面板地址",type:"error"}),S.value=!1,!1;b.get(`${z}/api/get_sub_list`,{params:{type:a,type_id:t,page:O.value,size:30}}).then((async a=>{if(0!=a.data.code)e({title:"Error",message:"系统异常",type:"error"});else{const e=a.data.data;I.value=e.total;const t=e.rows;for(let a of t){const e=(await b.get(`${z}/api/get_cover?url=${a.cover}`)).data;0===e.code&&(a.cover=`${z}${e.data.data}`)}Object.assign(F.value,t)}S.value=!1})).catch((a=>{S.value=!1,e({title:"Error",message:"请求异常",type:"error"})}))},B=j();return c((()=>{const e=E("type"),a=E("type_id");X.setState(a,e),A()})),(e,d)=>{const p=n,c=i,b=u,j=a,E=o,z=l,P=t,X=s,G=r;return x(),m(_,null,[g((x(),v(j,{wrap:"","infinite-scroll-disabled":true},{default:f((()=>[(x(!0),m(_,null,h(F.value,((e,a)=>(x(),v(b,{key:e,"body-style":{padding:"1px"},style:{width:"26em"}},{default:f((()=>[y(p,{src:e.cover,"referrer-policy":"no-referrer",style:{cursor:"pointer"},onClick:a=>{return t=e.id,void B.push({path:"/room",query:{roomid:t}});var t}},null,8,["src","onClick"]),k("div",T,[k("span",null,$(e.title),1),k("div",U,[k("time",q,$(w(D)(e.start_time))+" ~ "+$(w(D)(e.end_time)),1),y(c,{text:"",class:"button"},{default:f((()=>[C($(e.name),1)])),_:2},1024)])])])),_:2},1024)))),128))])),_:1})),[[X,S.value],[G,Y]]),y(P,{gutter:20,style:{"margin-top":"20px"}},{default:f((()=>[y(z,{span:12,offset:10},{default:f((()=>[y(E,{background:"",layout:"prev,pager,next",total:I.value,"current-page":O.value,"onUpdate:currentPage":A},null,8,["total","current-page"])])),_:1})])),_:1})],64)}}});export{F as default};
