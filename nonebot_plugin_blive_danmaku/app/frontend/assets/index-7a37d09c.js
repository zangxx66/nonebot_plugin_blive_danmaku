import{u as e,g as a,a as t,b as s,c as l,_ as r}from"./index-8cc691e9.js";import{a as i,q as o,e as n,k as u,v as d,r as c,t as m,f as p,u as v,l as _,b as f,o as g}from"./elementPlus-4153dd68.js";import{E as y,r as h,aG as x,b as E,K as k,j as b,k as j,P as w,S as L,u as T,a0 as I,T as P,h as q,W as z,X as S,aL as U}from"./vendor-77f251a3.js";import{_ as A}from"./_plugin-vue_export-helper-1b428a4d.js";import"./lodash-520df23f.js";const D={class:"danmaku-room-list",style:{"padding-top":"0%",width:"60%",margin:"0 auto"}},O={class:"danmaku-page-header"},R={class:"text-large font-600 mr-3"},V={class:"image-slot"},W={class:"image-slot"},X={style:{"text-align":"left"}},B={style:{color:"#000","font-weight":"bold","font-size":"20px"}},G={style:{"text-align":"left"}},H={style:{"text-align":"left"}},K=A(y({__name:"index",setup(y){const A=h({}),K=h(!0),C=h("120px"),F=U({loader:()=>r((()=>import("./index-49986429.js")),["assets/index-49986429.js","assets/index-8cc691e9.js","assets/vendor-77f251a3.js","assets/vendor-b57f6aba.css","assets/elementPlus-4153dd68.js","assets/lodash-520df23f.js","assets/elementPlus-4a1bb6eb.css","assets/index-b9dd8eea.css"])}),J=U({loader:()=>r((()=>import("./index-c9b2ce6b.js")),["assets/index-c9b2ce6b.js","assets/elementPlus-4153dd68.js","assets/vendor-77f251a3.js","assets/vendor-b57f6aba.css","assets/lodash-520df23f.js","assets/elementPlus-4a1bb6eb.css","assets/index-8cc691e9.js","assets/index-b9dd8eea.css","assets/echarts-d90c9d97.js"])}),M=e(),N=x(),Q=()=>{const e=M.getType,a=M.getTypeId,t=M.getUid;N.replace({name:"history",query:{type:e,type_id:a,uid:t}})},Y=()=>{const e=document.querySelector(".danmaku-main");C.value=.5*e.clientHeight+"px"};return E((()=>{Y(),window.addEventListener("resize",Y);const e=a("type"),l=a("type_id");null!=e&&null!=l&&M.setState(l,e),(()=>{const e=a("roomid");if(null==e)return i({title:"Error",message:"房间号不存在，请返回上一页重新进入",type:"error"}),K.value=!1,!1;K.value=!0,t({id:e}).then((async e=>{if(0!=e.code)i({title:"Error",message:"系统异常",type:"error"});else{const t=e.data.room_info;if(document.title=t.title,t.cover.startsWith("/")&&(t.cover=s+t.cover),A.value=t,0===M.getUid){const e=a("uid");M.setUid(e)}}K.value=!1})).catch((e=>{K.value=!1,i({title:"Error",message:"请求异常",type:"error"})}))})()})),k((()=>{window.removeEventListener("resize",Y)})),(e,a)=>{const t=o,s=p,r=v,i=_,y=f,h=g,x=n,E=u,k=d;return q(),b("div",D,[j("div",O,[w(t,{icon:T(c),onBack:Q},{content:L((()=>[j("span",R,z(A.value.name),1)])),_:1},8,["icon"])]),I((q(),P(x,null,{default:L((()=>[w(i,{class:"danmaku-room-card"},{default:L((()=>[w(r,{src:A.value.cover,referrerpolicy:"no-referrer",fit:"fill"},{placeholder:L((()=>[I(j("div",V,null,512),[[k,!0]])])),error:L((()=>[j("div",W,[w(s,null,{default:L((()=>[w(T(m))])),_:1})])])),_:1},8,["src"])])),_:1}),w(h,null,{default:L((()=>[j("ul",X,[w(y,{type:"primary",target:"_blank",href:"https://space.bilibili.com/"+A.value.uid},{default:L((()=>[j("div",B,z(A.value.title),1)])),_:1},8,["href"])]),j("ul",G,[j("span",null," 开始时间："+z(T(l)(A.value.start_time)),1)]),j("ul",H,[j("span",null," 结束时间："+z(T(l)(A.value.end_time)),1)])])),_:1})])),_:1})),[[k,K.value]]),w(E,{"max-height":C.value,"view-style":{overflowX:"hidden"}},{default:L((()=>[A.value.statistics?(q(),P(T(J),{key:0})):S("",!0),w(T(F))])),_:1},8,["max-height"])])}}}),[["__scopeId","data-v-c89a774a"]]);export{K as default};
