import{u as e,g as a,a as t,b as s,c as l,_ as r}from"./index-3b039937.js";import{a as i,q as o,b as n,g as d,v as u,r as c,t as m,c as p,u as v,i as _,m as f,l as g}from"./elementPlus-2bbb65c2.js";import{E as y,r as h,aG as x,b as E,K as b,j,k,P as w,S as T,u as I,a0 as L,T as P,h as q,W as z,X as S,aH as U}from"./vendor-fa374c7f.js";import{_ as A}from"./_plugin-vue_export-helper-1b428a4d.js";import"./lodash-520df23f.js";const D={class:"danmaku-room-list",style:{"padding-top":"0%",width:"60%",margin:"0 auto"}},H={class:"danmaku-page-header"},O={class:"text-large font-600 mr-3"},R={class:"image-slot"},V={class:"image-slot"},W={style:{"text-align":"left"}},X={style:{color:"#000","font-weight":"bold","font-size":"20px"}},B={style:{"text-align":"left"}},G={style:{"text-align":"left"}},K=A(y({__name:"index",setup(y){const A=h({}),K=h(!0),C=h("120px"),F=U({loader:()=>r((()=>import("./index-10fe5420.js")),["assets/index-10fe5420.js","assets/elementPlus-2bbb65c2.js","assets/vendor-fa374c7f.js","assets/vendor-b57f6aba.css","assets/lodash-520df23f.js","assets/elementPlus-5cfbb218.css","assets/index-3b039937.js","assets/index-4d7b4401.css","assets/_plugin-vue_export-helper-1b428a4d.js","assets/index-fe1a4f18.css"])}),J=U({loader:()=>r((()=>import("./index-1f52d48f.js")),["assets/index-1f52d48f.js","assets/elementPlus-2bbb65c2.js","assets/vendor-fa374c7f.js","assets/vendor-b57f6aba.css","assets/lodash-520df23f.js","assets/elementPlus-5cfbb218.css","assets/index-3b039937.js","assets/index-4d7b4401.css","assets/echarts-400b5edd.js","assets/_plugin-vue_export-helper-1b428a4d.js","assets/index-7bb2b86c.css"])}),M=e(),N=x(),Q=()=>{const e=M.getType,a=M.getTypeId,t=M.getUid;N.replace({name:"history",query:{type:e,type_id:a,uid:t}})},Y=()=>{const e=document.querySelector(".danmaku-main");C.value=.5*e.clientHeight+"px"};return E((()=>{Y(),window.addEventListener("resize",Y);const e=a("type"),l=a("type_id");null!=e&&null!=l&&M.setState(l,e),(()=>{const e=a("roomid");if(null==e)return i({title:"Error",message:"房间号不存在，请返回上一页重新进入",type:"error"}),K.value=!1,!1;K.value=!0,t({id:e}).then((async e=>{if(0!=e.code)i({title:"Error",message:"系统异常",type:"error"});else{const t=e.data.room_info;if(document.title=t.title,t.cover.startsWith("/")&&(t.cover=s+t.cover),A.value=t,0===M.getUid){const e=a("uid");M.setUid(e)}}K.value=!1})).catch((e=>{K.value=!1,i({title:"Error",message:"请求异常",type:"error"})}))})()})),b((()=>{window.removeEventListener("resize",Y)})),(e,a)=>{const t=o,s=p,r=v,i=_,y=f,h=g,x=n,E=d,b=u;return q(),j("div",D,[k("div",H,[w(t,{icon:I(c),onBack:Q},{content:T((()=>[k("span",O,z(A.value.name),1)])),_:1},8,["icon"])]),L((q(),P(x,null,{default:T((()=>[w(i,{class:"danmaku-room-card"},{default:T((()=>[w(r,{src:A.value.cover,referrerpolicy:"no-referrer",fit:"fill"},{placeholder:T((()=>[L(k("div",R,null,512),[[b,!0]])])),error:T((()=>[k("div",V,[w(s,null,{default:T((()=>[w(I(m))])),_:1})])])),_:1},8,["src"])])),_:1}),w(h,null,{default:T((()=>[k("ul",W,[w(y,{type:"primary",target:"_blank",href:"https://space.bilibili.com/"+A.value.uid},{default:T((()=>[k("div",X,z(A.value.title),1)])),_:1},8,["href"])]),k("ul",B,[k("span",null," 开始时间："+z(I(l)(A.value.start_time)),1)]),k("ul",G,[k("span",null," 结束时间："+z(I(l)(A.value.end_time)),1)])])),_:1})])),_:1})),[[b,K.value]]),w(E,{"max-height":C.value,"view-style":{overflowX:"hidden"}},{default:T((()=>[A.value.statistics?(q(),P(I(J),{key:0})):S("",!0),w(I(F))])),_:1},8,["max-height"])])}}}),[["__scopeId","data-v-c28f2ca4"]]);export{K as default};
