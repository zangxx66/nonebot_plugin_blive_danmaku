import{u as e,_ as a}from"./index-f5e6f37d.js";import{l as t,y as s,E as l,v as o,A as r,w as n,B as i,i as u,f as m}from"./elementPlus-1c2335c6.js";import{g as d,r as c,b as p,C as f}from"./api-a97bd869.js";import{F as _,t as v,aO as y,p as g,f as h,g as x,U as b,Z as j,u as k,a6 as E,_ as w,o as I,a1 as P,aP as T}from"./vendor-3efffbad.js";import"./lodash-520df23f.js";const $={class:"danmaku-room-list",style:{"padding-top":"0%",width:"60%",margin:"0 auto"}},A={class:"danmaku-page-header"},B={class:"text-large font-600 mr-3"},C={style:{"text-align":"left"}},G={style:{color:"#000","font-weight":"bold","font-size":"20px"}},O={style:{"text-align":"left"}},R={style:{"text-align":"left"}},U=_({__name:"index",setup(_){const U=v({}),q=v(!0),z=y({loader:()=>a((()=>import("./danmaku-7f896f3d.js")),["assets/danmaku-7f896f3d.js","assets/elementPlus-1c2335c6.js","assets/vendor-3efffbad.js","assets/lodash-520df23f.js","assets/elementPlus-07bbbd26.css","assets/api-a97bd869.js","assets/danmaku-88ed8e86.css"])}),D=e(),F=T(),L=()=>{const e=D.getType,a=D.getTypeId;F.replace({path:"/",query:{type:e,type_id:a}})};return g((()=>{const e=d("type"),a=d("type_id");null!=e&&null!=a&&D.setState(a,e),(()=>{const e=d("roomid");if(null==e)return t({title:"Error",message:"房间号不存在，请返回上一页重新进入",type:"error"}),!1;q.value=!0,c.GetRoomInfo({id:e}).then((async e=>{if(0!=e.code)t({title:"Error",message:"系统异常",type:"error"});else{const a=e.data;if(document.title=`${a.room_info.name}-blive-danmaku`,a.room_info.cover.includes("i0.hdslb.com")){const e=await c.GetCoverUrl({url:a.room_info.cover});a.room_info.cover=`${p}${e.data.data}`}U.value=a.room_info}q.value=!1})).catch((e=>{q.value=!1,t({title:"Error",message:"请求异常",type:"error"})}))})()})),(e,a)=>{const t=s,d=n,c=i,p=u,_=m,v=l,y=o;return I(),h("div",$,[x("div",A,[b(t,{icon:k(r),onBack:L},{content:j((()=>[x("span",B,P(U.value.name),1)])),_:1},8,["icon"])]),E((I(),w(v,null,{default:j((()=>[b(c,null,{default:j((()=>[b(d,{src:U.value.cover,fit:"fill"},null,8,["src"])])),_:1}),b(_,null,{default:j((()=>[x("ul",C,[b(p,{type:"primary",target:"_blank",href:"https://space.bilibili.com/"+U.value.uid},{default:j((()=>[x("div",G,P(U.value.title),1)])),_:1},8,["href"])]),x("ul",O,[x("span",null," 开始时间："+P(k(f)(U.value.start_time)),1)]),x("ul",R,[x("span",null," 结束时间："+P(k(f)(U.value.end_time)),1)])])),_:1})])),_:1})),[[y,q.value]]),b(k(z))])}}});export{U as default};
