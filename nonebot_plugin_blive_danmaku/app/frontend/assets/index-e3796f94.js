import{u as e,g as a,a as t,b as s,c as l,_ as r}from"./index-46250209.js";import{a as i,q as o,e as n,k as d,v as u,r as c,t as m,f as p,u as v,l as _,b as f,o as g}from"./elementPlus-a0efc0c3.js";import{E as h,r as y,aH as x,b as E,K as j,j as k,k as b,P as w,S as T,u as I,a0 as L,T as P,h as q,W as z,X as S,aM as U}from"./vendor-e976c2a2.js";import{_ as A}from"./_plugin-vue_export-helper-1b428a4d.js";import"./highcharts-0ca2bcfe.js";import"./lodash-520df23f.js";const D={class:"danmaku-room-list",style:{"padding-top":"0%",width:"60%",margin:"0 auto"}},H={class:"danmaku-page-header"},O={class:"text-large font-600 mr-3"},R={class:"image-slot"},V={class:"image-slot"},W={style:{"text-align":"left"}},X={style:{color:"#000","font-weight":"bold","font-size":"20px"}},B={style:{"text-align":"left"}},K={style:{"text-align":"left"}},M=A(h({__name:"index",setup(h){const A=y({}),M=y(!0),C=y("120px"),F=U({loader:()=>r((()=>import("./index-0296b12b.js")),["assets/index-0296b12b.js","assets/index-46250209.js","assets/vendor-e976c2a2.js","assets/highcharts-0ca2bcfe.js","assets/vendor-b57f6aba.css","assets/elementPlus-a0efc0c3.js","assets/lodash-520df23f.js","assets/elementPlus-4a1bb6eb.css","assets/index-b9dd8eea.css"])}),G=U({loader:()=>r((()=>import("./index-9d22ce0f.js")),["assets/index-9d22ce0f.js","assets/elementPlus-a0efc0c3.js","assets/vendor-e976c2a2.js","assets/highcharts-0ca2bcfe.js","assets/vendor-b57f6aba.css","assets/lodash-520df23f.js","assets/elementPlus-4a1bb6eb.css","assets/index-46250209.js","assets/index-b9dd8eea.css","assets/echarts-2c727c84.js"])}),J=e(),N=x(),Q=()=>{const e=J.getType,a=J.getTypeId,t=J.getUid;N.replace({name:"history",query:{type:e,type_id:a,uid:t}})},Y=()=>{const e=document.querySelector(".danmaku-main");C.value=.5*e.clientHeight+"px"};return E((()=>{Y(),window.addEventListener("resize",Y);const e=a("type"),l=a("type_id");null!=e&&null!=l&&J.setState(l,e),(()=>{const e=a("roomid");if(null==e)return i({title:"Error",message:"房间号不存在，请返回上一页重新进入",type:"error"}),M.value=!1,!1;M.value=!0,t({id:e}).then((async e=>{if(0!=e.code)i({title:"Error",message:"系统异常",type:"error"});else{const t=e.data.room_info;if(document.title=t.title,t.cover.startsWith("/")&&(t.cover=s+t.cover),A.value=t,0===J.getUid){const e=a("uid");J.setUid(e)}}M.value=!1})).catch((e=>{M.value=!1,i({title:"Error",message:"请求异常",type:"error"})}))})()})),j((()=>{window.removeEventListener("resize",Y)})),(e,a)=>{const t=o,s=p,r=v,i=_,h=f,y=g,x=n,E=d,j=u;return q(),k("div",D,[b("div",H,[w(t,{icon:I(c),onBack:Q},{content:T((()=>[b("span",O,z(A.value.name),1)])),_:1},8,["icon"])]),L((q(),P(x,null,{default:T((()=>[w(i,{class:"danmaku-room-card"},{default:T((()=>[w(r,{src:A.value.cover,referrerpolicy:"no-referrer",fit:"fill"},{placeholder:T((()=>[L(b("div",R,null,512),[[j,!0]])])),error:T((()=>[b("div",V,[w(s,null,{default:T((()=>[w(I(m))])),_:1})])])),_:1},8,["src"])])),_:1}),w(y,null,{default:T((()=>[b("ul",W,[w(h,{type:"primary",target:"_blank",href:"https://space.bilibili.com/"+A.value.uid},{default:T((()=>[b("div",X,z(A.value.title),1)])),_:1},8,["href"])]),b("ul",B,[b("span",null," 开始时间："+z(I(l)(A.value.start_time)),1)]),b("ul",K,[b("span",null," 结束时间："+z(I(l)(A.value.end_time)),1)])])),_:1})])),_:1})),[[j,M.value]]),w(E,{"max-height":C.value,"view-style":{overflowX:"hidden"}},{default:T((()=>[A.value.statistics?(q(),P(I(G),{key:0})):S("",!0),w(I(F))])),_:1},8,["max-height"])])}}}),[["__scopeId","data-v-c89a774a"]]);export{M as default};
