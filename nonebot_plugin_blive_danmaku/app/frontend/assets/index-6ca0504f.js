import{u as e,g as a,a as t,b as s,c as l,d as r,_ as i}from"./index-e0157117.js";import{a as o,q as n,j as d,k as u,v as c,r as m,t as p,e as v,u as _,l as f,b as y,o as g}from"./elementPlus-c7747d25.js";import{E as h,r as x,aK as k,b as E,K as b,j,k as w,P,S as T,u as I,a0 as L,T as q,h as S,W as U,X as z,aP as A}from"./vendor-38b28640.js";import"./lodash-520df23f.js";const D={class:"danmaku-room-list",style:{"padding-top":"0%",width:"60%",margin:"0 auto"}},K={class:"danmaku-page-header"},O={class:"text-large font-600 mr-3"},R={class:"image-slot"},V={class:"image-slot"},W={style:{"text-align":"left"}},X={class:"danmaku-room-title"},B={style:{"text-align":"left"}},H={style:{"text-align":"left"}},C=i(h({__name:"index",setup(i){const h=x({}),C=x(!0),F=x("120px"),G=A({loader:()=>r((()=>import("./index-e21c79cd.js")),["assets/index-e21c79cd.js","assets/index-e0157117.js","assets/vendor-38b28640.js","assets/vendor-b57f6aba.css","assets/elementPlus-c7747d25.js","assets/lodash-520df23f.js","assets/elementPlus-64a38c77.css","assets/index-4f53a516.css"])}),J=A({loader:()=>r((()=>import("./index-608f79d0.js")),["assets/index-608f79d0.js","assets/elementPlus-c7747d25.js","assets/vendor-38b28640.js","assets/vendor-b57f6aba.css","assets/lodash-520df23f.js","assets/elementPlus-64a38c77.css","assets/index-e0157117.js","assets/index-4f53a516.css","assets/echarts-e70e2381.js"])}),M=e(),N=k(),Q=()=>{const e=M.getType,a=M.getTypeId,t=M.getUid;N.replace({name:"history",query:{type:e,type_id:a,uid:t}})},Y=()=>{const e=document.querySelector(".danmaku-main");F.value=.5*e.clientHeight+"px"};return E((()=>{Y(),window.addEventListener("resize",Y);const e=a("type"),l=a("type_id");null!=e&&null!=l&&M.setState(l,e),(()=>{const e=a("roomid");if(null==e)return o({title:"Error",message:"房间号不存在，请返回上一页重新进入",type:"error"}),C.value=!1,!1;C.value=!0,t({id:e}).then((async e=>{if(0!=e.code)o({title:"Error",message:"系统异常",type:"error"});else{const t=e.data.room_info;if(document.title=t.title,t.cover.startsWith("/")&&(t.cover=s+t.cover),h.value=t,0===M.getUid){const e=a("uid");M.setUid(e)}}C.value=!1})).catch((e=>{C.value=!1,o({title:"Error",message:"请求异常",type:"error"})}))})()})),b((()=>{window.removeEventListener("resize",Y)})),(e,a)=>{const t=n,s=v,r=_,i=f,o=y,x=g,k=d,E=u,b=c;return S(),j("div",D,[w("div",K,[P(t,{icon:I(m),onBack:Q},{content:T((()=>[w("span",O,U(h.value.name),1)])),_:1},8,["icon"])]),L((S(),q(k,null,{default:T((()=>[P(i,{class:"danmaku-room-card"},{default:T((()=>[P(r,{src:h.value.cover,referrerpolicy:"no-referrer",fit:"fill"},{placeholder:T((()=>[L(w("div",R,null,512),[[b,!0]])])),error:T((()=>[w("div",V,[P(s,null,{default:T((()=>[P(I(p))])),_:1})])])),_:1},8,["src"])])),_:1}),P(x,null,{default:T((()=>[w("ul",W,[P(o,{type:"primary",target:"_blank",href:"https://space.bilibili.com/"+h.value.uid},{default:T((()=>[w("div",X,U(h.value.title),1)])),_:1},8,["href"])]),w("ul",B,[w("span",null," 开始时间："+U(I(l)(h.value.start_time)),1)]),w("ul",H,[w("span",null," 结束时间："+U(I(l)(h.value.end_time)),1)])])),_:1})])),_:1})),[[b,C.value]]),P(E,{"max-height":F.value,"view-style":{overflowX:"hidden"}},{default:T((()=>[h.value.statistics?(S(),q(I(J),{key:0})):z("",!0),P(I(G))])),_:1},8,["max-height"])])}}}),[["__scopeId","data-v-f577db64"]]);export{C as default};
