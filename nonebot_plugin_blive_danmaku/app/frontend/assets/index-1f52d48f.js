import{a,U as t,D as e,x as s,V as l,T as n}from"./elementPlus-2bbb65c2.js";import{g as o,h as r,R as u,F as d}from"./index-3b039937.js";import{L as m,u as i,i as c,a as p,b as v,c as _,d as f,e as h,f as g,g as k,h as y,j as b,k as w}from"./echarts-400b5edd.js";import{E as x,r as j,b as A,h as T,j as L,k as E,P as M,S,Q as G,ad as H,T as I,aM as P,aN as B}from"./vendor-fa374c7f.js";import{_ as D}from"./_plugin-vue_export-helper-1b428a4d.js";import"./lodash-520df23f.js";const F=a=>(P("data-v-d24cba4f"),a=a(),B(),a),N={class:"danmaku-hot-word"},O=F((()=>E("span",null,"弹幕热词",-1))),Q=["innerHTML"],R=F((()=>E("div",{id:"danmaku-chart",class:"danmaku-chart"},null,-1))),U=D(x({__name:"index",setup(x){const P=j({total:0,avg_danmaku:0,watched:0,hot_word:Array(),minute_danmaku:Array()}),B=()=>{const t=o("roomid");r({rid:t}).then((t=>{if(0!=t.code)a({title:"提示",message:"获取统计信息失败",type:"error"});else{P.value.avg_danmaku=t.data.avg_danmaku,P.value.total=t.data.total;const a=t.data.hot_word;a.forEach((a=>a.message=u(a.message))),P.value.hot_word=a,P.value.minute_danmaku=t.data.min_danmaku,P.value.watched=t.data.watched,(()=>{const a={xAxis:{type:"category",data:Array.from(P.value.minute_danmaku,(({countTime:a})=>d(a))),boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{type:"value",boundaryGap:[0,"100%"],name:"弹幕数"},series:[{name:"弹幕数",data:Array.from(P.value.minute_danmaku,(({sum:a})=>a)),type:"line",symbol:"rect",sampling:"lttb",smooth:!0,itemStyle:{color:"rgb(255, 70, 131)"},areaStyle:{color:new m(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}}],tooltip:{trigger:"axis",position:a=>[a[0],"10%"]},title:{text:"每分钟弹幕统计"},dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]};i([p,v,_,f,h,g,k,y,b,w]);const t=document.getElementById("danmaku-chart");c(t).setOption(a)})()}})).catch((t=>{a({title:"提示",message:t||"获取统计信息失败",type:"error"})}))};return A((()=>{B()})),(a,o)=>{const r=t,u=e,d=s,m=l,i=n;return T(),L(G,null,[E("div",null,[M(d,null,{default:S((()=>[M(u,{span:8},{default:S((()=>[M(r,{title:"弹幕数",value:P.value.total},null,8,["value"])])),_:1}),M(u,{span:8},{default:S((()=>[M(r,{title:"平均每分钟弹幕",value:P.value.avg_danmaku},null,8,["value"])])),_:1}),M(u,{span:8},{default:S((()=>[M(r,{title:"观看人数",value:P.value.watched},null,8,["value"])])),_:1})])),_:1}),E("div",N,[O,(T(!0),L(G,null,H(P.value.hot_word,(a=>(T(),I(i,{key:a.message,effect:"dark",content:a.sum+"条",placement:"top"},{default:S((()=>[M(m,{class:"danmaku-hot-word-tag"},{default:S((()=>[E("span",{innerHTML:a.message},null,8,Q)])),_:2},1024)])),_:2},1032,["content"])))),128))])]),R],64)}}}),[["__scopeId","data-v-d24cba4f"]]);export{U as default};
