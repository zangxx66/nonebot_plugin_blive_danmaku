import{E as e,q as a,w as t,v as l,x as s,y as o,A as r,B as u,o as d,C as n,D as i,F as p,t as c,c as m,u as v,G as f}from"./elementPlus-34be6093.js";import{F as g,t as y,aQ as _,p as h,f as b,U as k,Z as V,a6 as w,_ as x,o as z,a0 as U,V as Y,an as C,u as j,g as D,a1 as E,aW as M,aX as P}from"./vendor-4de459fa.js";import{u as T,g as X,e as q,b as F,c as I,f as S,d as A}from"./index-3db67a99.js";import{_ as B}from"./_plugin-vue_export-helper-1b428a4d.js";import"./lodash-520df23f.js";const G=e=>(M("data-v-0345a0cf"),e=e(),P(),e),N={class:"danmaku-room-list"},O={class:"image-slot"},Q={style:{padding:"14px"}},W={class:"bottom"},Z={class:"time"},H=G((()=>D("br",null,null,-1))),J=G((()=>D("br",null,null,-1))),K=B(g({__name:"index",setup(g){const M=y([]),P=y(0),B=y(1),G=y([10,20,30,50]),K=y(20),L=y(!0),R=y({}),$=T(),ee=e=>{K.value=e,le()},ae=e=>{B.value=e,le()},te=_(),le=()=>{L.value=!0;const a=$.getType,t=$.getTypeId,l=$.getUid;if(!a||!t)return e({title:"Error",message:"当前地址有误，请从bot重新获取面板地址",type:"error"}),L.value=!1,!1;const s={type:a,type_id:t,uid:l,page:B.value,size:K.value,title:R.value.title,danmaku:R.value.danmaku,start:R.value.start,end:R.value.end};q(s).then((async a=>{if(0!=a.code)return e({title:"Error",message:a.msg||"系统异常",type:"error"}),!1;const t=a.data,l=t.rows;for(let e of l)if(e.cover.includes("i0.hdslb.com")){const a=await F({url:e.cover,rid:e.id});0===a.code&&(e.cover=a.data.data)}else e.cover.includes(I)&&(e.cover=e.cover.replace(I,""));M.value=[],Object.assign(M.value,l),P.value=t.total,L.value=!1})).catch((a=>{L.value=!1,e({title:"Error",message:"请求异常",type:"error"})}))},se=()=>{B.value=1,le()};return h((()=>{window.scrollTo({top:0,behavior:"smooth"});const e=X("type"),a=X("type_id");$.setState(a,e);const t=X("uid");$.setUid(t),(()=>{const e={uid:$.getUid};S(e).then((e=>{document.title=e.data.data}))})(),le()})),(e,g)=>{const y=s,_=o,h=r,T=u,X=d,q=n,F=a,S=m,$=v,le=f,oe=i,re=t,ue=p,de=l;return z(),b("div",N,[k(F,{style:{width:"60rem"}},{default:V((()=>[k(q,{ref:"form",model:R.value,"label-position":"left",size:"default"},{default:V((()=>[k(_,{label:"标题"},{default:V((()=>[k(y,{"input-style":"width:40%",modelValue:R.value.title,"onUpdate:modelValue":g[0]||(g[0]=e=>R.value.title=e),placeholder:"输入一个直播标题"},null,8,["modelValue"])])),_:1}),k(_,{label:"路灯"},{default:V((()=>[k(y,{"input-style":"width:40%",modelValue:R.value.danmaku,"onUpdate:modelValue":g[1]||(g[1]=e=>R.value.danmaku=e),placeholder:"这里可以搜索路灯"},null,8,["modelValue"])])),_:1}),k(_,{label:"时间"},{default:V((()=>[k(T,{span:6},{default:V((()=>[k(h,{modelValue:R.value.start,"onUpdate:modelValue":g[2]||(g[2]=e=>R.value.start=e),type:"date",label:"Pick a date","value-format":"X",placeholder:"选择一个开始日期",format:"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])])),_:1}),k(T,{class:"text-center",span:1,style:{margin:"0 0.5rem"}},{default:V((()=>[U("-")])),_:1}),k(T,{span:6},{default:V((()=>[k(h,{modelValue:R.value.end,"onUpdate:modelValue":g[3]||(g[3]=e=>R.value.end=e),type:"date",label:"Pick a date","value-format":"X",placeholder:"选择一个结束日期",format:"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])])),_:1})])),_:1}),k(_,null,{default:V((()=>[k(X,{type:"primary",onClick:se},{default:V((()=>[U("搜索")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),w((z(),x(re,{gutter:10,style:{width:"100rem"}},{default:V((()=>[M.value.length>0?(z(!0),b(Y,{key:0},C(M.value,(e=>(z(),x(T,{key:e.id,span:6,style:{"padding-top":"1%"}},{default:V((()=>[k(F,{class:"danmaku-room-card"},{default:V((()=>[k(le,{placement:"top",width:400,title:e.name,trigger:"hover",content:e.title},{reference:V((()=>[k($,{alt:e.title,src:j(I)+e.cover,"referrer-policy":"no-referrer",style:{cursor:"pointer"},onClick:a=>{return t=e.id,void te.push({path:"/room",query:{roomid:t}});var t}},{error:V((()=>[D("div",O,[k(S,null,{default:V((()=>[k(j(c))])),_:1})])])),_:2},1032,["alt","src","onClick"])])),_:2},1032,["title","content"]),D("div",Q,[D("span",null,E(e.title),1),D("div",W,[D("time",Z,[U("开始："+E(j(A)(e.start_time))+" ",1),H,U("~"),J,U(" 结束："+E(j(A)(e.end_time)),1)]),k(X,{text:"",class:"button"},{default:V((()=>[U(E(e.name),1)])),_:2},1024)])])])),_:2},1024)])),_:2},1024)))),128)):(z(),x(T,{key:1,span:24},{default:V((()=>[k(oe,{description:"No data"})])),_:1}))])),_:1})),[[de,L.value]]),k(re,{gutter:20,style:{"margin-top":"20px","margin-bottom":"20px"}},{default:V((()=>[k(T,{span:12,offset:10},{default:V((()=>[k(ue,{background:"",layout:"total,sizes,prev,pager,next","page-size":K.value,"page-sizes":G.value,total:P.value,"current-page":B.value,onSizeChange:ee,onCurrentChange:ae},null,8,["page-size","page-sizes","total","current-page"])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-0345a0cf"]]);export{K as default};
